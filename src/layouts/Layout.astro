---
interface Props {
    title: string;
}

const { title } = Astro.props;
import FloatingWhatsApp from "../components/FloatingWhatsApp.astro";
import { ClientRouter } from "astro:transitions";
---

<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="description"
            content="Servicios de traducción e interpretación, educación bilingüe y formación en carreras y oficios."
        />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/png" href="/CLFlogo.png" />
        <meta name="generator" content={Astro.generator} />
        <title>{title}</title>

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website" />
        <meta property="og:url" content={Astro.url} />
        <meta property="og:title" content={title} />
        <meta
            property="og:description"
            content="Servicios de traducción e interpretación, educación bilingüe y formación en carreras y oficios."
        />
        <meta property="og:image" content="/CLFlogo.png" />

        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image" />
        <meta property="twitter:url" content={Astro.url} />
        <meta property="twitter:title" content={title} />
        <meta
            property="twitter:description"
            content="Servicios de traducción e interpretación, educación bilingüe y formación en carreras y oficios."
        />
        <meta property="twitter:image" content="/CLFlogo.png" />

        <!-- PWA -->
        <link rel="manifest" href="/manifest.json" />
        <meta name="theme-color" content="#2563eb" />
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="default" />
        <link rel="apple-touch-icon" href="/CLFlogo.png" />

        <!-- Schema.org LocalBusiness -->
        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "LocalBusiness",
                "name": "Caribbean Language Facility",
                "description": "Servicios de traducción e interpretación, educación bilingüe y formación en carreras y oficios.",
                "url": "https://caribbeanlanguagefacility.com",
                "telephone": "+1-868-269-3510",
                "email": "Caribbeanlanguagefacility@gmail.com",
                "address": {
                    "@type": "PostalAddress",
                    "addressLocality": "Princes Town",
                    "addressRegion": "Trinidad",
                    "addressCountry": "TT"
                },
                "image": "/CLFlogo.png",
                "priceRange": "$$",
                "openingHours": "Mo-Fr 08:00-18:00",
                "sameAs": []
            }
        </script>

        <ClientRouter />

        <!-- Preconnect to Google Fonts for faster loading -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

        <!-- Fonts with display=swap for better performance -->
        <link
            href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800;900&display=swap"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,0&display=swap"
            rel="stylesheet"
        />
        <style is:global>
            .material-symbols-outlined {
                font-variation-settings:
                    "FILL" 0,
                    "wght" 400,
                    "GRAD" 0,
                    "opsz" 24;
            }
        </style>
    </head>
    <body
        class="font-display bg-background-light text-text-light selection:bg-primary selection:text-white"
    >
        <div
            class="relative flex min-h-screen w-full flex-col group/design-root overflow-x-hidden"
        >
            <div class="layout-container flex h-full grow flex-col">
                <slot />
            </div>
        </div>
        <FloatingWhatsApp />
        <script>
            // Simple Scroll Reveal Animation
            const observerOptions = {
                root: null,
                rootMargin: "0px",
                threshold: 0.1,
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("animate-fade-in-up");
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            document.addEventListener("astro:page-load", () => {
                const elements = document.querySelectorAll(
                    "section, .reveal-on-scroll",
                );
                elements.forEach((el) => observer.observe(el));
            });

            // Service Worker Registration
            if ("serviceWorker" in navigator) {
                window.addEventListener("load", () => {
                    navigator.serviceWorker
                        .register("/sw.js")
                        .then((reg) => console.log("SW registered"))
                        .catch((err) => console.log("SW failed:", err));
                });
            }
        </script>
        <style is:global>
            /* Custom Animation Utility */
            .animate-fade-in-up {
                animation: fadeInUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
            }
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            /* Initial state for elements to be revealed */
            section,
            .reveal-on-scroll {
                opacity: 0;
            }
        </style>
    </body>
</html>
